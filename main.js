(()=>{"use strict";const t=(t,e)=>s=>{s.target.closest(t)&&e(s)};new class{constructor(){this.title=document.querySelector(".main-header__title"),this.main=document.querySelector(".main-content"),this.state={content:"",title:""},fetch("api/data.json").then((t=>t.json())).then((t=>{this.data=t,this.init()})),document.addEventListener("click",t(".subject-selection button",(t=>{const e=t.target.closest(".subject-selection button");this.startQuiz(e.value)}))),document.addEventListener("submit",t("#answer",(t=>{if(t.preventDefault(),console.log(t.submitter),t.submitter.matches('[data-quizz="next"]'))return this.state.step++,void this.renderQuestion();this.validateForm(t.target.closest("form"))})))}init(){const t=this.data.quizzes.reduce(((t,e)=>`${t}\n                <li>\n                    <button class="button" value="${e.title}">\n                        <figure class="button__icon"><img src="${e.icon}"></figure>\n                        ${e.title}\n                    </button>\n                </li>\n            `),"");this.state.content=`\n            <h2 class="welcome-title">Welcome to the <strong>Frontend Quiz!</strong></h2>\n            <h3 class="meta-title">Pick a subject to get started.</h3>\n            <ul class="subject-selection">${t}</ul>`,this.render()}render(){this.title.innerHTML=this.state.title,this.main.innerHTML=this.state.content}startQuiz(t){this.quiz=this.data.quizzes.find((e=>e.title===t)),this.state.title=this.quiz.title,this.state.step=0,this.renderQuestion()}renderQuestion(t=this.state.step){const e=this.quiz.questions[t],s=e.options.reduce(((t,e,s)=>{const n=this._escapeHTML(e);return`${t}\n                <label>\n                    <input type="radio" name="answer" value="${n}">\n                    <span class="button">\n                        <span class="button__icon">${String.fromCharCode(97+s).toUpperCase()}</span>${n}\n                    </span>\n                </label>\n            `}),"");this.state.content=`\n            <h2 class="meta-title">Question\n                ${t+1}\n                of 10\n            </h2>\n            <p class="question">${e.question}</p>\n            <label><span class="invisible">Progress: </span>\n                <progress value="${t+1}" max="${this.quiz.questions.length}"></progress>\n            </label>\n\n            <form id="answer">\n                <fieldset>${s}\n                    <button class="button button--submit" data-quizz="submit">Submit Answer</button>\n                    <p class="error"></p>\n                </fieldset>\n                <button class="button button--submit" data-quizz="next">Next</button>\n            </form>\n            `,this.render()}validateForm(t){const e=new FormData(t).get("answer");if(!e)return void(t.querySelector(".error").innerHTML="Please select an answer");t.querySelector(".error").innerHTML="";const s=this.quiz.questions[this.state.step];t.querySelector("fieldset").setAttribute("disabled","");const n=t.querySelector('[name="answer"]:checked').nextElementSibling;e===s.answer?n.classList.add("button--valid"):(n.classList.add("button--error"),t.querySelector(`[type="radio"][value="${s.answer}"]`).nextElementSibling.classList.add("button--valid"))}_escapeHTML(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}}})();